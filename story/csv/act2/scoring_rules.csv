"quest_id","rule_scope","rule_id","expression","notes"
"Q6_CROWN_OR_COVENANT","scoring","fit_bonus","fit_bonus = ((ending_vector=='conquest' && governance=='iron_tithe') ? 10 : (ending_vector=='accord' && governance=='fjord_charter') ? 10 : (ending_vector=='ashen' && governance=='ash_covenant') ? 10 : (ending_vector=='exile' && governance=='ash_covenant') ? 4 : -4)",""
"Q6_CROWN_OR_COVENANT","scoring","humanity","humanity = (choice('Q6_C2')=='Q6_C2_A' ? -8 : choice('Q6_C2')=='Q6_C2_B' ? 8 : 2)",""
"Q6_CROWN_OR_COVENANT","scoring","q6_score","q6_score = clamp(32 + 0.18*W + 0.18*M + 0.18*O + fit_bonus + humanity - (famine?8:0) - (oath_shattered?10:0), 0, 100)",""
"Q6_CROWN_OR_COVENANT","scoring","final_score","q6_score",""
"Q7_WHALE_ROAD","scoring","route_fit","route_fit = ((ending_vector=='conquest' && route_plan=='open_sea') ? 8 : (ending_vector=='accord' && route_plan=='escort_pact') ? 8 : (ending_vector=='ashen' && route_plan=='ash_fog') ? 8 : (ending_vector=='exile' && route_plan=='ice_stealth') ? 8 : -3)",""
"Q7_WHALE_ROAD","scoring","supply_term","supply_term = 4*Food + 2*Med + 2*Tar",""
"Q7_WHALE_ROAD","scoring","q7_score","q7_score = clamp(25 + 0.20*W + 0.14*M + 0.12*O + route_fit + supply_term - (Wounds*5) - (sickness?6:0), 0, 100)",""
"Q7_WHALE_ROAD","scoring","final_score","q7_score",""
"Q8_KNIVES_UNDER_SNOW","derived","culprit","culprit = (ending_vector=='conquest' ? 'jarl_envoy' : ending_vector=='accord' ? 'pirate_splinter' : ending_vector=='ashen' ? 'rogue_acolyte' : 'leif_broker')",""
"Q8_KNIVES_UNDER_SNOW","derived","innocent_blood","innocent_blood = (accusation != culprit)",""
"Q8_KNIVES_UNDER_SNOW","scoring","accuracy","accuracy = (accusation == culprit ? 12 : -12) + ((ending_vector=='exile' && investigation_method=='shadow') ? 4 : 0)",""
"Q8_KNIVES_UNDER_SNOW","scoring","method_bonus","method_bonus = (investigation_method=='torture' ? -8 : investigation_method=='inquest' ? 6 : investigation_method=='shadow' ? 4 : 2)",""
"Q8_KNIVES_UNDER_SNOW","scoring","q8_score","q8_score = clamp(30 + 0.18*O + 0.16*M + 0.10*V + 0.10*P + 0.10*S + accuracy + method_bonus - (innocent_blood?10:0), 0, 100)",""
"Q8_KNIVES_UNDER_SNOW","scoring","final_score","q8_score",""
"Q9_SIEGE_OF_NESODDEN","scoring","plan_fit","plan_fit = ((ending_vector=='conquest' && battle_plan=='night_assault') ? 10 : (ending_vector=='accord' && battle_plan=='hold_chokes') ? 9 : (ending_vector=='ashen' && battle_plan=='ash_storm') ? 10 : (ending_vector=='exile' && battle_plan=='shadow_sabotage') ? 8 : (ending_vector=='accord' && battle_plan=='cease_line') ? 7 : -4)",""
"Q9_SIEGE_OF_NESODDEN","scoring","q9_score","q9_score = clamp(28 + 0.20*W + 0.18*M + 0.16*P + 0.14*V + 0.10*O + 0.10*S + plan_fit - (mutiny?12:0) - (oath_cracked?8:0), 0, 100)",""
"Q9_SIEGE_OF_NESODDEN","scoring","final_score","q9_score",""
"Q10_THAW_RECKONING","scoring","vector_align","vector_align = ((ending_vector=='conquest' && claim=='pirate_crown') ? 12 : (ending_vector=='accord' && (claim=='high_jarl_compact' || claim=='fjord_charter_confederacy')) ? 12 : (ending_vector=='ashen' && claim=='ash_regency') ? 12 : (ending_vector=='exile' && claim=='ghost_fleet_exit') ? 12 : -5)",""
"Q10_THAW_RECKONING","scoring","ring_align","ring_align = ((ending_vector=='conquest' && ring_fate=='wear_publicly') ? 4 : (ending_vector=='accord' && (ring_fate=='break_divide' || ring_fate=='neutral_shrine')) ? 6 : (ending_vector=='ashen' && (ring_fate=='cast_fjord' || ring_fate=='give_yrsa')) ? 6 : (ending_vector=='exile' && ring_fate=='cast_fjord') ? 4 : 0)",""
"Q10_THAW_RECKONING","scoring","oath_term","oath_term = (oath_form=='blood_oath' ? 4 : oath_form=='law_stone' ? 6 : oath_form=='witness_charter' ? 7 : -12)",""
"Q10_THAW_RECKONING","scoring","q10_score","q10_score = clamp(34 + 0.18*P + 0.18*V + 0.18*O + 0.16*W + 0.14*M + 0.10*S + vector_align + ring_align + oath_term - (oath_shattered?12:0) - (famine?8:0), 0, 100)",""
"Q10_THAW_RECKONING","post","act3_start_warlord","if (q10_score>=75 && ending_vector=='conquest') then act3_start_state='WARLORD_ASCENDANT'",""
"Q10_THAW_RECKONING","post","act3_start_treaty","if (q10_score>=75 && ending_vector=='accord') then act3_start_state='TREATY_REGENT'",""
"Q10_THAW_RECKONING","post","act3_start_ashen","if (q10_score>=75 && ending_vector=='ashen') then act3_start_state='ASH_PROPHET'",""
"Q10_THAW_RECKONING","post","act3_start_ghost","if (q10_score>=65 && ending_vector=='exile') then act3_start_state='GHOST_ADMIRAL'",""
"Q10_THAW_RECKONING","post","act3_start_fallback","if (act3_start_state is null) then act3_start_state='FRACTURED_FJORD'",""
"Q10_THAW_RECKONING","post","ending_threshold_mod","if (A2>=30) aligned_ending_threshold_delta=-5; if (A2<=-10) frozen_graves_risk_floor=50",""
"Q10_THAW_RECKONING","scoring","final_score","q10_score",""
